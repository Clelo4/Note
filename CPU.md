# 1. CPU缓存技术

## 1.1 多级缓存

CPU内部集成了多个级别的缓存，用于提高CPU的访问速度和性能

- 背景：CPU的执行速度远高于内存速度，导致CPU的执行效率受制于内存。

- 解决方式：多级缓存技术

  - 使用多级缓存是成本和速度的考量
  - CPU多级缓存的作用是减少CPU访问内存的次数，尽可能提高缓存命中率，而不是频繁去访问低层级缓存，从而提高CPU的执行效率和性能。

## 1.2 CPU缓存不一致性问题

在多线程编程中，CPU会将相同的数据缓存在各自的缓存中，减少主内存的访问次数，提高运行效率，但也带来了缓存不一致问题。

解决缓存不一致问题的底层技术

- 缓存一致性协议

# 2. CPU总线锁

> 用于实现原子操作

- CPU总线锁技术是一种CPU内部的控制技术，它可以保证CPU在执行某些指令时不被中断，从而保证指令的执行完整性和正确性。

- 具体来说，当CPU执行一些需要访问内存或者其他设备的指令时，CPU将总线锁定，这样其他设备就无法访问总线，直到CPU完成指令的执行并释放总线锁定。这样可以避免其他设备在CPU执行指令的过程中对内存或者其他设备进行访问，

# 3. 内存屏障（Memory Barrier）

用于保证CPU对内存的访问顺序

- Load Barrier：用于保证在执行Load指令之前，所有之前的Store指令都已经完成。
- Store Barrier：用于保证在执行Store指令之前，所有之前的Load和Store指令都已经完成。
- Full Barrier：用于保证在执行Full Barrier指令之前，所有之前的Load和Store指令都已经完成，并且所有之前的指令都不会被重排到Full Barrier指令之后。

# 3. CPU乱序执行技术